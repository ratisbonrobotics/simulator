<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>A formalization of co-axial rotored aerodynamics</title>
    <link rel="stylesheet" href="pubcss-ieee.css" />
    <style>
      .katex-display {
        overflow-x: auto;
        overflow-y: hidden;
      }
    </style>
    <link
      rel="stylesheet"
      href="https://cdn.jsdelivr.net/npm/katex@0.16.9/dist/katex.min.css"
      integrity="sha384-n8MVd4RsNIU0tAv4ct0nTaAbDJwPJzDEaqSD1odI+WdtXRGWt2kTvGFasHpSy3SV"
      crossorigin="anonymous"
    />
    <script
      defer
      src="https://cdn.jsdelivr.net/npm/katex@0.16.9/dist/katex.min.js"
      integrity="sha384-XjKyOOlGwcjNTAIQHIpgOno0Hl1YQqzUOEleOLALmuqehneUG+vnGctmUb0ZY0l8"
      crossorigin="anonymous"
    ></script>
    <script
      defer
      src="https://cdn.jsdelivr.net/npm/katex@0.16.9/dist/contrib/auto-render.min.js"
      integrity="sha384-+VBxd3r6XgURycqtZ117nYw44OOcIax56Z4dCRWbxyPt0Koah1uHoK0o4+/RRE05"
      crossorigin="anonymous"
      onload="renderMathInElement(document.body);"
    ></script>
  </head>

  <body>
    <header class="col-span">
      <h1 class="title counter-skip">
        A formalization of co-axial rotored aerodynamics
      </h1>
      <div class="authors">
        <div class="author">
          <div>Markus Heimerl</div>
          <div>Ratisbon Robotics</div>
          <div>Regensburg, Germany</div>
          <div>markusheimerl@ratisbonrobotics.com</div>
        </div>
      </div>
    </header>

    <div class="abstract">
      <p>
        <em>Abstract</em>—In this paper, we present a comprehensive
        formalization of the aerodynamics associated with co-axial rotored
        drones. By adopting a multidisciplinary approach, we integrate
        principles from fluid dynamics, aerodynamics, and robotics to model and
        simulate the behavior of these drones in three-dimensional space. Our
        work contributes to a deeper understanding of drone dynamics, offering a
        robust theoretical framework that can aid in the design and control of
        co-axial rotored aerial vehicles. The paper outlines the mathematical
        formulation of spatial dynamics, state representation, and the evolution
        of drone states over time, grounded in classical physics and modern
        aerodynamics principles.
      </p>
      <p>
        <em>Keywords</em>—Co-axial Rotors, Drone Aerodynamics, Spatial Dynamics,
        State Representation, Fluid Dynamics, Robotics, Theoretical Modelling
        Computational Simulations, Newtonian Mechanics, Aerodynamics
      </p>
    </div>

    <h1>Introduction</h1>
    <section>
      <p>
        The advent of drones, particularly those with co-axial rotors, has
        revolutionized numerous fields, from logistics and surveillance to
        research and rescue operations. The unique design of co-axial rotored
        drones offers enhanced stability and maneuverability compared to
        traditional single-rotor configurations. However, the complexity of
        their aerodynamics poses significant challenges in terms of theoretical
        understanding and practical application. This paper aims to demystify
        the aerodynamics of co-axial rotored drones by developing a
        comprehensive mathematical framework that describes their behavior in
        three-dimensional space. We start by defining the state representation
        of the drone, incorporating both linear and angular aspects. Following
        this, we delve into the dynamics formulation, detailing the forces and
        torques acting on the drone and their impact on its motion. The
        interplay between the drone's mechanical structure and the aerodynamic
        forces offers a fascinating insight into the principles governing its
        flight. Our theoretical framework is supported by simulations, which
        provide a visual and practical understanding of the drone's behavior
        under various conditions. This work not only contributes to the academic
        understanding of drone aerodynamics but also provides a solid foundation
        for future advancements in drone technology and its applications.
      </p>
    </section>

    <h1>Spatial Dynamics</h1>
    <section>
      <h2>State Representation</h2>
      <p>
        The three-dimensional state vector, \(X\), entirely describes the
        drone's state at a point in time.
      </p>
      <div class="equation">
        \( X = [x, y, z, \theta, \phi, \psi, \dot{x}, \dot{y}, \dot{z},
        \dot{\alpha}, \dot{\beta}, \dot{\gamma}] \)
      </div>
      <p>where</p>
      <ul>
        <li>\(x, y, z\) denote the drone's positional coordinates in space,</li>
        <li>
          \(\dot{x}, \dot{y}, \dot{z}\) represent linear velocities along the x,
          y, and z axes,
        </li>
        <li>
          \(\theta, \phi, \psi\) stand for rotational angles around the x, y,
          and z axes,
        </li>
        <li>
          \(\dot{\alpha}, \dot{\beta}, \dot{\gamma}\) indicate rotational
          velocities inside the drone's frame of reference, i.e. inside the
          local frame of reference.
        </li>
      </ul>

      <figure>
        <div style="border: 1px solid #000; margin-top: 6px; overflow: hidden">
          <img
            src="3d_drone.svg"
            alt="Three-dimensional state representation of a drone, illustrating positional coordinates and rotational angles in space"
            style="
              max-width: 100%;
              max-height: 100%;
              display: block;
              margin: auto;
            "
          />
        </div>
        <figcaption>
          Three-dimensional state representation of a drone, illustrating
          positional coordinates and rotational angles in space.
        </figcaption>
      </figure>

      <h2>Dynamics Formulation</h2>
      <p>
        The dynamics of the drone are characterized by how its state \(X\)
        evolves through time under the influence of forces. The thrusts and
        moments follow a quadratic relationship with rotor velocities
        (\(\omega_{i}\)), which is derived from the principles of fluid
        dynamics.
      </p>
      <div class="equation">
        \[ F_{i} = k_{f} \omega_{i}^2 \qquad M_{i} = k_{m} \omega_{i}^2 \]
      </div>
      <p>
        Through a step-by-step application of trigonometric principles we obtain
        an operation that maps vectors from within the drone's frame of
        reference to the world's frame of reference.
      </p>
      <!-- prettier-ignore -->
      <div class="equation">
        \[
        \begin{align*}
          \begin{bmatrix}
            F_{x} \\
            F_{y} \\
            F_{z}
          \end{bmatrix} &=
          \begin{bmatrix}
            \cos(\psi) & \sin(\psi) & 0 \\
            -\sin(\psi) & \cos(\psi) & 0 \\
            0 & 0 & 1 
          \end{bmatrix}
          \begin{bmatrix}
            \cos(\phi) & 0 & -\sin(\phi) \\
            0 & 1 & 0 \\
            \sin(\phi) & 0 & \cos(\phi) \\
          \end{bmatrix}
          \begin{bmatrix}
            1 & 0 & 0 \\
            0 & \cos(\theta) & \sin(\theta) \\
            0 & -\sin(\theta) & \cos(\theta) \\
          \end{bmatrix}
          \begin{bmatrix}
            0 \\
            \sum_i^4 F_i \\
            0
          \end{bmatrix}
          \\
          \begin{bmatrix}
            F_{x} \\
            F_{y} \\
            F_{z}
          \end{bmatrix} &=
          \begin{bmatrix}
          \cos(\phi)\cos(\psi) & \sin(\phi)\sin(\theta)\cos(\psi) + \sin(\psi)\cos(\theta) & -\sin(\phi)\cos(\psi)\cos(\theta) + \sin(\psi)\sin(\theta) \\
          -\sin(\psi)\cos(\phi) & -\sin(\phi)\sin(\psi)\sin(\theta) + \cos(\psi)\cos(\theta) & \sin(\phi)\sin(\psi)\cos(\theta) + \sin(\theta)\cos(\psi) \\
          \sin(\phi) & -\sin(\theta)\cos(\phi) & \cos(\phi)\cos(\theta) \\
          \end{bmatrix}
        
          \begin{bmatrix}
            0 \\
            \sum_i^4 F_i \\
            0
          \end{bmatrix}
        \end{align*}
        \]        
      </div>

      <p>
        Changes in the drone's position (\(x, y\)) are derived from the
        integration of velocities (\(\dot{x}, \dot{y}\)), which in turn stem
        from the integration of accelerations (\(\ddot{x}, \ddot{y}\)). These
        accelerations are calculated using Newton's second law
        <a href="#newton1687">2</a>, with \(g\) being earth's gravitational
        constant \( 9.81 \frac{m}{s^2} \).
      </p>

      <!-- prettier-ignore -->
      <div class="equation">
        \[
          \ddot{x} = \frac{F_{x}}{m} \qquad
          \ddot{y} = \frac{(F_{y} - F_{g})}{m} = \frac{F_{y}}{m} - g \qquad
          \ddot{z} = \frac{F_{z}}{m}
        \]
      </div>

      <figure>
        <div style="border: 1px solid #000; margin-top: 6px; overflow: hidden">
          <img
            src="3d_drone_at_rest.svg"
            alt="Drone at \(X = [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0]\)."
            style="
              max-width: 100%;
              max-height: 100%;
              display: block;
              margin: auto;
            "
          />
        </div>
        <figcaption>
          Drone at \(X = [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0]\). The drone's and
          the world's frame of reference are perfectly aligned.
        </figcaption>
      </figure>

      We define the torques within the drones frame of reference according to
      the principles of Archimedes.
      <!-- prettier-ignore -->
      <div class="equation">
        \[
          \begin{align*}
            \tau_{\alpha} &= L((F_3 + F_4) - (F_2 + F_1)) \\
            \tau_{\beta} &= (M_1 + M_3) - (M_2 + M_4) \\
            \tau_{\gamma} &= L((F_2 + F_3) - (F_1 + F_4))
          \end{align*}
        \]
      </div>

      Through application of Euler's rotation equations we obtain the angular
      acceleration within the drone's frame of reference.

      <!-- prettier-ignore -->
      <div class="equation">
        \[
        \begin{align*}
          \begin{bmatrix}
            \tau_{\alpha} \\
            \tau_{\beta} \\
            \tau_{\gamma}
          \end{bmatrix} &=
          \begin{bmatrix}
            I_{\alpha} & 0 & 0 \\
            0 & I_{\beta} & 0 \\
            0 & 0 & I_{\gamma}
          \end{bmatrix}
          \begin{bmatrix}
            \ddot{\alpha} \\
            \ddot{\beta} \\
            \ddot{\gamma}
          \end{bmatrix}
          +
          \begin{bmatrix}
            \dot{\alpha} \\
            \dot{\beta} \\
            \dot{\gamma}
          \end{bmatrix}
          \times
          \left(
            \begin{bmatrix}
              I_{\alpha} & 0 & 0 \\
              0 & I_{\beta} & 0 \\
              0 & 0 & I_{\gamma}
            \end{bmatrix}
            \begin{bmatrix}
              \dot{\alpha} \\
              \dot{\beta} \\
              \dot{\gamma}
            \end{bmatrix}
          \right) \\
          \begin{bmatrix} 
            \ddot{\alpha} \\ 
            \ddot{\beta} \\ 
            \ddot{\gamma}
          \end{bmatrix} &=
          \begin{bmatrix} 
            \frac{1}{I_{\alpha}} & 0 & 0 \\ 
            0 & \frac{1}{I_{\beta}} & 0 \\ 
            0 & 0 & \frac{1}{I_{\gamma}} 
          \end{bmatrix}
          \left( 
            \begin{bmatrix} 
              \tau_{\alpha} \\ 
              \tau_{\beta} \\ 
              \tau_{\gamma} 
            \end{bmatrix} - 
            \begin{bmatrix} 
              \dot{\alpha} \\ 
              \dot{\beta} \\ 
              \dot{\gamma} 
            \end{bmatrix} \times 
            \left( 
              \begin{bmatrix} 
                I_{\alpha} & 0 & 0 \\ 
                0 & I_{\beta} & 0 \\ 
                0 & 0 & I_{\gamma} 
              \end{bmatrix} 
              \begin{bmatrix} 
                \dot{\alpha} \\ 
                \dot{\beta} \\ 
                \dot{\gamma} 
              \end{bmatrix} 
            \right) 
          \right)
        \end{align*}
      \]
      </div>
      <p>
        By taking the time derivative of each rotation matrix we can map the
        angular velocities within the drone's frame of reference to angular
        velocities in the world's frame of reference.
      </p>
      <!-- prettier-ignore -->
      <div class="equation">
        \[
        \begin{align*}
          \begin{bmatrix}
            \dot\theta \\
            \dot\phi \\
            \dot\psi
          \end{bmatrix}
          &= 
          \left[\begin{matrix}- \dot\phi \sin{\left(\phi \right)} \cos{\left(\psi \right)} - \dot\psi \sin{\left(\psi \right)} \cos{\left(\phi \right)} & \dot\phi \sin{\left(\theta \right)} \cos{\left(\phi \right)} \cos{\left(\psi \right)} - \dot\psi \sin{\left(\phi \right)} \sin{\left(\psi \right)} \sin{\left(\theta \right)} + \dot\psi \cos{\left(\psi \right)} \cos{\left(\theta \right)} + \dot\theta \sin{\left(\phi \right)} \cos{\left(\psi \right)} \cos{\left(\theta \right)} - \dot\theta \sin{\left(\psi \right)} \sin{\left(\theta \right)} & - \dot\phi \cos{\left(\phi \right)} \cos{\left(\psi \right)} \cos{\left(\theta \right)} + \dot\psi \sin{\left(\phi \right)} \sin{\left(\psi \right)} \cos{\left(\theta \right)} + \dot\psi \sin{\left(\theta \right)} \cos{\left(\psi \right)} + \dot\theta \sin{\left(\phi \right)} \sin{\left(\theta \right)} \cos{\left(\psi \right)} + \dot\theta \sin{\left(\psi \right)} \cos{\left(\theta \right)}\\\dot\phi \sin{\left(\phi \right)} \sin{\left(\psi \right)} - \dot\psi \cos{\left(\phi \right)} \cos{\left(\psi \right)} & - \dot\phi \sin{\left(\psi \right)} \sin{\left(\theta \right)} \cos{\left(\phi \right)} - \dot\psi \sin{\left(\phi \right)} \sin{\left(\theta \right)} \cos{\left(\psi \right)} - \dot\psi \sin{\left(\psi \right)} \cos{\left(\theta \right)} - \dot\theta \sin{\left(\phi \right)} \sin{\left(\psi \right)} \cos{\left(\theta \right)} - \dot\theta \sin{\left(\theta \right)} \cos{\left(\psi \right)} & \dot\phi \sin{\left(\psi \right)} \cos{\left(\phi \right)} \cos{\left(\theta \right)} + \dot\psi \sin{\left(\phi \right)} \cos{\left(\psi \right)} \cos{\left(\theta \right)} - \dot\psi \sin{\left(\psi \right)} \sin{\left(\theta \right)} - \dot\theta \sin{\left(\phi \right)} \sin{\left(\psi \right)} \sin{\left(\theta \right)} + \dot\theta \cos{\left(\psi \right)} \cos{\left(\theta \right)}\\\dot\phi \cos{\left(\phi \right)} & \dot\phi \sin{\left(\phi \right)} \sin{\left(\theta \right)} - \dot\theta \cos{\left(\phi \right)} \cos{\left(\theta \right)} & - \dot\phi \sin{\left(\phi \right)} \cos{\left(\theta \right)} - \dot\theta \sin{\left(\theta \right)} \cos{\left(\phi \right)}\end{matrix}\right]
          \begin{bmatrix}
            \dot{\alpha} \\
            \dot{\beta} \\
            \dot{\gamma}
          \end{bmatrix}
          \\
          \begin{bmatrix}
            \dot\theta \\
            \dot\phi \\
            \dot\psi
          \end{bmatrix}
          &=
          \left[\begin{matrix}\dot\alpha \left(- \dot\phi \sin{\left(\phi \right)} \cos{\left(\psi \right)} - \dot\psi \sin{\left(\psi \right)} \cos{\left(\phi \right)}\right) + \dot\beta \left(\dot\phi \sin{\left(\theta \right)} \cos{\left(\phi \right)} \cos{\left(\psi \right)} - \dot\psi \sin{\left(\phi \right)} \sin{\left(\psi \right)} \sin{\left(\theta \right)} + \dot\psi \cos{\left(\psi \right)} \cos{\left(\theta \right)} + \dot\theta \sin{\left(\phi \right)} \cos{\left(\psi \right)} \cos{\left(\theta \right)} - \dot\theta \sin{\left(\psi \right)} \sin{\left(\theta \right)}\right) + \dot\gamma \left(- \dot\phi \cos{\left(\phi \right)} \cos{\left(\psi \right)} \cos{\left(\theta \right)} + \dot\psi \sin{\left(\phi \right)} \sin{\left(\psi \right)} \cos{\left(\theta \right)} + \dot\psi \sin{\left(\theta \right)} \cos{\left(\psi \right)} + \dot\theta \sin{\left(\phi \right)} \sin{\left(\theta \right)} \cos{\left(\psi \right)} + \dot\theta \sin{\left(\psi \right)} \cos{\left(\theta \right)}\right)\\\dot\alpha \left(\dot\phi \sin{\left(\phi \right)} \sin{\left(\psi \right)} - \dot\psi \cos{\left(\phi \right)} \cos{\left(\psi \right)}\right) + \dot\beta \left(- \dot\phi \sin{\left(\psi \right)} \sin{\left(\theta \right)} \cos{\left(\phi \right)} - \dot\psi \sin{\left(\phi \right)} \sin{\left(\theta \right)} \cos{\left(\psi \right)} - \dot\psi \sin{\left(\psi \right)} \cos{\left(\theta \right)} - \dot\theta \sin{\left(\phi \right)} \sin{\left(\psi \right)} \cos{\left(\theta \right)} - \dot\theta \sin{\left(\theta \right)} \cos{\left(\psi \right)}\right) + \dot\gamma \left(\dot\phi \sin{\left(\psi \right)} \cos{\left(\phi \right)} \cos{\left(\theta \right)} + \dot\psi \sin{\left(\phi \right)} \cos{\left(\psi \right)} \cos{\left(\theta \right)} - \dot\psi \sin{\left(\psi \right)} \sin{\left(\theta \right)} - \dot\theta \sin{\left(\phi \right)} \sin{\left(\psi \right)} \sin{\left(\theta \right)} + \dot\theta \cos{\left(\psi \right)} \cos{\left(\theta \right)}\right)\\\dot\alpha \dot\phi \cos{\left(\phi \right)} + \dot\beta \left(\dot\phi \sin{\left(\phi \right)} \sin{\left(\theta \right)} - \dot\theta \cos{\left(\phi \right)} \cos{\left(\theta \right)}\right) + \dot\gamma \left(- \dot\phi \sin{\left(\phi \right)} \cos{\left(\theta \right)} - \dot\theta \sin{\left(\theta \right)} \cos{\left(\phi \right)}\right)\end{matrix}\right]

          \\

          \dot\theta &= - \dot\alpha \left(\dot\phi \sin{\left(\phi \right)} \cos{\left(\psi \right)} + \dot\psi \sin{\left(\psi \right)} \cos{\left(\phi \right)}\right) + \dot\beta \left(\dot\phi \sin{\left(\theta \right)} \cos{\left(\phi \right)} \cos{\left(\psi \right)} - \dot\psi \sin{\left(\phi \right)} \sin{\left(\psi \right)} \sin{\left(\theta \right)} + \dot\psi \cos{\left(\psi \right)} \cos{\left(\theta \right)} + \dot\theta \sin{\left(\phi \right)} \cos{\left(\psi \right)} \cos{\left(\theta \right)} - \dot\theta \sin{\left(\psi \right)} \sin{\left(\theta \right)}\right) + \dot\gamma \left(- \dot\phi \cos{\left(\phi \right)} \cos{\left(\psi \right)} \cos{\left(\theta \right)} + \dot\psi \sin{\left(\phi \right)} \sin{\left(\psi \right)} \cos{\left(\theta \right)} + \dot\psi \sin{\left(\theta \right)} \cos{\left(\psi \right)} + \dot\theta \sin{\left(\phi \right)} \sin{\left(\theta \right)} \cos{\left(\psi \right)} + \dot\theta \sin{\left(\psi \right)} \cos{\left(\theta \right)}\right) \\
            \dot\phi &= \dot\alpha \left(\dot\phi \sin{\left(\phi \right)} \sin{\left(\psi \right)} - \dot\psi \cos{\left(\phi \right)} \cos{\left(\psi \right)}\right) - \dot\beta \left(\dot\phi \sin{\left(\psi \right)} \sin{\left(\theta \right)} \cos{\left(\phi \right)} + \dot\psi \sin{\left(\phi \right)} \sin{\left(\theta \right)} \cos{\left(\psi \right)} + \dot\psi \sin{\left(\psi \right)} \cos{\left(\theta \right)} + \dot\theta \sin{\left(\phi \right)} \sin{\left(\psi \right)} \cos{\left(\theta \right)} + \dot\theta \sin{\left(\theta \right)} \cos{\left(\psi \right)}\right) + \dot\gamma \left(\dot\phi \sin{\left(\psi \right)} \cos{\left(\phi \right)} \cos{\left(\theta \right)} + \dot\psi \sin{\left(\phi \right)} \cos{\left(\psi \right)} \cos{\left(\theta \right)} - \dot\psi \sin{\left(\psi \right)} \sin{\left(\theta \right)} - \dot\theta \sin{\left(\phi \right)} \sin{\left(\psi \right)} \sin{\left(\theta \right)} + \dot\theta \cos{\left(\psi \right)} \cos{\left(\theta \right)}\right) \\
\dot\psi &= \dot\alpha \dot\phi \cos{\left(\phi \right)} + \dot\beta \left(\dot\phi \sin{\left(\phi \right)} \sin{\left(\theta \right)} - \dot\theta \cos{\left(\phi \right)} \cos{\left(\theta \right)}\right) - \dot\gamma \left(\dot\phi \sin{\left(\phi \right)} \cos{\left(\theta \right)} + \dot\theta \sin{\left(\theta \right)} \cos{\left(\phi \right)}\right)
        \end{align*}
        \]
        
      </div>

      <h2>State Evolution</h2>
      <p>
        The state of the drone at time \( t + \Delta t \) is determined by the
        sum of its current state \( X_t \) and the integral of the state's time
        derivative \( \dot{X} \) over the interval \( \Delta t \). This integral
        represents a precise calculation of the state change. However, for
        computational simplicity, we often use an approximation method developed
        by Leonhard Euler <a href="#euler1768">1</a>. His method approximates
        the future state by assuming a constant rate of change (\( \dot{X}_t \))
        over a small interval
        <span style="white-space: nowrap">(\(\Delta t\))</span>, simplifying the
        integral to a product of the rate of change and the time interval.
      </p>
      <div class="equation">
        \[ X_{t + \Delta t} = X_{t} + \int_{t}^{t+\Delta t} \dot{X}_{\tau} d\tau
        \approx X_t + \Delta t\dot{X}_t \]
      </div>
    </section>

    <h5 class="references">References</h5>
    <div class="references">
      <cite id="euler1768">
        Euler, L. (1770). Institutiones calculi integralis
      </cite>
      <cite id="newton1687">
        Newton, I. (1687). Philosopsiæ Naturalis Principia Mathematica
      </cite>
      <cite id="archimedes250bc">
        Archimedes (ca. 250 BC). Περὶ ἐπιπέδων ἰσορροπιῶν
      </cite>
      <cite id="hipparchus150bc"> Hipparchus (ca. 150 BC)</cite>
    </div>
  </body>
</html>
